# Zoe Relay Server Environment Configuration
# Copy this file to .env and configure the values for your deployment

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# External addresses where this relay can be reached
# Comma-separated list of DNS names or IP addresses with optional ports
# Examples: relay.example.com, relay.example.com:8443, 192.168.1.100:8443
ZOERELAY_EXTERNAL_ADDRESSES=relay.yourdomain.com

# =============================================================================
# BOT CONFIGURATION
# =============================================================================

# Docker Compose profiles to enable specific bots
# Uncomment the profiles you want to enable:
# COMPOSE_PROFILES=signal-bot,whatsapp-bot  # Enable both bots
# COMPOSE_PROFILES=signal-bot               # Enable only Signal bot
# COMPOSE_PROFILES=whatsapp-bot             # Enable only WhatsApp bot
# COMPOSE_PROFILES=                         # Disable all bots (relay only)

# Maximum connection attempts for bots
MAX_CONNECTION_ATTEMPTS=10

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Interface to bind the server to (default: 127.0.0.1)
# For production, use 0.0.0.0 to accept connections from all interfaces
ZOERELAY_INTERFACE=0.0.0.0

# Port to bind the server to (default: 13908)
ZOERELAY_PORT=13908

# Optional server name for display purposes
ZOERELAY_NAME=My Zoe Relay Server

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Data directory for all persistent storage (keys, blobs, etc.)
# This will be mounted as a volume in Docker
ZOERELAY_DATA_DIR=/app/data

# Blob storage directory (optional, defaults to data-dir/blobs)
# ZOERELAY_BLOB_DIR=/app/data/blobs

# Redis URL for message storage and coordination
ZOERELAY_REDIS_URL=redis://redis:6379

# =============================================================================
# SECURITY CONFIGURATION (OPTIONAL)
# =============================================================================

# Private key for the server in PEM format (optional)
# If not provided, a new key will be generated and saved to data-dir/server.key
# For production with multiple instances, generate once and set this variable
# ZOERELAY_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----

# Private key file path (optional, defaults to data-dir/server.key)
# ZOERELAY_KEY_FILE=/app/data/server.key

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Rust log level (default: info)
# Options: error, warn, info, debug, trace
RUST_LOG=info

# =============================================================================
# DOCKER/VOLUME CONFIGURATION
# =============================================================================

# Host path for relay data storage (keys, blobs, etc.)
ZOE_DATA_PATH=./data

# Host path for Redis data storage
REDIS_DATA_PATH=./redis-data

# Redis external port (only if you need external Redis access)
# REDIS_EXTERNAL_PORT=6379

# Redis password (optional, for additional security)
# REDIS_PASSWORD=your-secure-password

# Redis Commander port (for management interface)
# REDIS_COMMANDER_PORT=8081

# =============================================================================
# HEALTH BRIDGE CONFIGURATION (Optional - activate with profiles)
# =============================================================================

# HTTP Health Bridge ports for external monitoring (e.g., Uptime Kuma)
# Simple standardized health check bridges that ping the service ports
# Enable relay health bridge: docker-compose --profile health-bridges up
# Enable signal health bridge: docker-compose --profile signal-bot --profile signal-bot-health up  
# Enable wa health bridge: docker-compose --profile whatsapp-bot --profile whatsapp-bot-health up
# RELAY_HEALTH_BRIDGE_PORT=8083
# SIGNAL_HEALTH_BRIDGE_PORT=8084
# WA_HEALTH_BRIDGE_PORT=8085

# =============================================================================
# PRODUCTION RECOMMENDATIONS
# =============================================================================

# 1. Set ZOERELAY_EXTERNAL_ADDRESSES to your actual domain name(s)
# 2. Use persistent volumes for ZOE_DATA_PATH and REDIS_DATA_PATH
# 3. Set strong REDIS_PASSWORD in production
# 4. Monitor logs and set appropriate RUST_LOG level
# 5. Ensure proper firewall rules for ZOERELAY_PORT
# 6. Use HTTPS/TLS termination at load balancer if needed (optional)
# 7. Backup ZOE_DATA_PATH and REDIS_DATA_PATH regularly